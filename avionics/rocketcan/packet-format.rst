Packet Format
=============

This document is based on canlib `message_types.h <https://github.com/waterloo-rocketry/canlib/blob/master/message_types.h>`_.

General Command (GENERAL_CMD)
-----------------------------
Send a command code

+--------+--------+--------+--------------+----------+
| Byte 0 | Byte 1 | Byte 2 | Byte 3       | Byte 4-7 |
+========+========+========+==============+==========+
| 3 byte timestamp         | Command Type | None     |
+--------------------------+--------------+----------+

Actuator Command (ACTUATOR_CMD)
-------------------------------
Send actuator on/off command

+--------+--------+--------+--------------+----------------+----------+
| Byte 0 | Byte 1 | Byte 2 | Byte 3       | Byte 4         | Byte 5-7 |
+========+========+========+==============+================+==========+
| 3 byte timestamp         | Actuator ID  | Actuator State | None     |
+--------------------------+--------------+----------------+----------+

Altemeter Arm Command (ALT_ARM_CMD)
-----------------------------------
Sets altemeter arming

+--------+--------+--------+-------------------+----------+
| Byte 0 | Byte 1 | Byte 2 | Byte 3            | Byte 4-7 |
+========+========+========+===================+==========+
| 3 byte timestamp         | Altemer Arm State | None     |
+--------------------------+-------------------+----------+

Reset Command (RESET_CMD)
-------------------------
Resets command for a microcontroller on board

+--------+--------+--------+----------+---------------------------+
| Byte 0 | Byte 1 | Byte 2 | Byte 3   | Byte 4-7                  |
+========+========+========+==========+===========================+
| 3 byte timestamp         | BOARD_ID | Analog Actuator State     |
+--------------------------+----------+---------------------------+

Actuator Analog Command (ACT_ANALOG_CMD)
----------------------------------------
Set analog actuator commanded state

+--------+--------+--------+-------------+---------------------------+
| Byte 0 | Byte 1 | Byte 2 | Byte 3      | Byte 4-7                  |
+========+========+========+=============+===========================+
| 3 byte timestamp         | ACTUATOR_ID | Analog Actuator State     |
+--------------------------+-------------+---------------------------+

Debug Message (DEBUG_MSG)
-------------------------
Commands board to send arbitrary 4 byte debug message

+--------+--------+--------+---------------------------------+--------------+------------------+
| Byte 0 | Byte 1 | Byte 2 | Byte 3                          | Byte 4       | Byte 5-7         |
+========+========+========+====================+============+==============+==================+
| 3 byte timestamp         | Debug's Importance |        Line Number        | Defines Message  |
+--------------------------+--------------------+------------+--------------+------------------+
|                          | Bit 0-3            | Bit 4-7    | Bit 0-7      |                  |
+--------------------------+--------------------+------------+--------------+------------------+

Print Debug Message (DEBUG_PRINTF)
----------------------------------
Prints the debug message

+----------+
| Byte 0-7 |
+==========+
| ASCII    |
+----------+

Debug Radio Command (DEBUG_RADIO_CMD)
-------------------------------------
Sets command for debug radio

+----------+
| Byte 0-7 |
+==========+
| ASCII    |
+----------+

Actuator Status (ACTUATOR_STAT)
-------------------------------
Defines the status of the actuator

+--------+--------+--------+--------------+-----------------+--------------------------+--------------+
| Byte 0 | Byte 1 | Byte 2 | Byte 3       | Byte 4          | Byte 5                   | Byte 6-7     |
+========+========+========+==============+=================+==========================+==============+
| 3 byte timestamp         | ACTUATOR_ID  | Actuator State  | Required Actuator State  | None         |
+--------------------------+--------------+-----------------+--------------------------+--------------+

Altemeter Arm Status (ALT_ARM_STAT)
-----------------------------------
Defines the status of the altemeter arm

+--------+--------+--------+---------------------+-------------------------------+------------------------------+
| Byte 0 | Byte 1 | Byte 2 | Byte 3              | Byte 4-5                      | Byte 6-7                     |
+========+========+========+=====================+===============================+==============================+
| 3 byte timestamp         | Altemeter Arm State | 2 byte Drogue Voltage (HI/LO) | 2 byte Main Voltage (HI/LO)  |
+--------------------------+---------------------+-------------------------------+------------------------------+

Board Status (BOARD_STAT)
-------------------------
Defines the status of the board

+--------+--------+--------+----------------------+----------------+
| Byte 0 | Byte 1 | Byte 2 | Byte 3               | Byte 4-7       |
+========+========+========+======================+================+
| 3 byte timestamp         |  Displays Error Code | BOARD_DEFINED  |
+--------------------------+----------------------+----------------+

Temperature Sensor (SENSOR_TEMP)
--------------------------------
Sensor that detects temperature

+--------+--------+--------+-----------------+--------------------------------------------+--------------+
| Byte 0 | Byte 1 | Byte 2 | Byte 3          | Byte 4-6                                   | Byte 7       |
+========+========+========+=================+============================================+==============+
| 3 byte timestamp         | Sensor's Number | 3 Temperature Sensor Bytes (HI/MED/LO)     | None         |
+--------------------------+-----------------+--------------------------------------------+--------------+

Altitude Sensor (SENSOR_ALTITUDE)
---------------------------------
Sensor that detects altitude

+--------+--------+--------+-----------------------------------------------+--------+
| Byte 0 | Byte 1 | Byte 2 | Byte 3-6                                      | Byte 7 |
+========+========+========+===============================================+========+
| 3 byte timestamp         | 4 Altitude Sensor Bytes (HI/MED HI/MED LO/LO) | None   |
+--------------------------+-----------------------------------------------+--------+

Accelerometer Sensor (SENSOR_ACC)
---------------------------------
Determines the values of the accelerometer

+------------------+----------------+---------------------------------+---------------------------------+---------------------------------+
| Byte 0           | Byte 1         | Byte 2-3                        | Byte 4-5                        | Byte 6-7                        |
+==================+================+=================================+=================================+=================================+
| 2 byte timestamp (MED/LO)         | Accelerometer's X value (HI/LO) | Accelerometer's Y value (HI/LO) | Accelerometer's z value (HI/LO) |
+------------------+----------------+---------------------------------+---------------------------------+---------------------------------+

Gyro Sensor (SENSOR_GYRO)
-------------------------
Determines the values of the gyro

+------------------+----------------+--------------------------+--------------------------+--------------------------+
| Byte 0           | Byte 1         | Byte 2-3                 | Byte 4-5                 | Byte 6-7                 |
+==================+================+==========================+==========================+==========================+
| 2 byte timestamp (MED/LO)         | Gyro's X value (HI/LO)   | Gyro's Y value (HI/LO)   | Gyro's z value (HI/LO)   |
+------------------+----------------+--------------------------+--------------------------+--------------------------+

Mag Sensor (SENSOR_MAG)
-----------------------
Determines the values of the mag

+------------------+----------------+-------------------------+-------------------------+-------------------------+
| Byte 0           | Byte 1         | Byte 2-3                | Byte 4-5                | Byte 6-7                |
+==================+================+=========================+=========================+=========================+
| 2 byte timestamp (MED/LO)         | Mag's X value (HI/LO)   | Mag's Y value (HI/LO)   | Mag's z value (HI/LO)   |
+------------------+----------------+-------------------------+-------------------------+-------------------------+

Analog Sensors (SENSOR_ANALOG)
------------------------------
Report analog sensor data

+------------------+----------------+-------------+-----------------+--------------+
| Byte 0           | Byte 1         | Byte 2      | Byte 3-4        | Byte 5-7     |
+==================+================+=============+=================+==============+
| 2 byte timestamp (MED/LO)         | SENSOR_ID   | Sensor Value    | None         |
+------------------+----------------+-------------+-----------------+--------------+

GPS Timestamp (GPS_TIMESTAMP)
-----------------------------
Shows the time on the GPS

+--------+--------+--------+--------------+----------------+----------------+--------------------+----------+
| Byte 0 | Byte 1 | Byte 2 | Byte 3       | Byte 4         | Byte 5         | Byte 6             | Byte 7   |
+========+========+========+==============+================+================+====================+==========+
| 3 byte timestamp         | Hours in UTC | Minutes in UTC | Seconds in UTC | Deciseconds in UTC | None     |
+--------------------------+--------------+----------------+----------------+--------------------+----------+

GPS Latitude (GPS_LAT)
----------------------
Shows the latitude

+--------+--------+--------+---------------------+--------------+-----------------------+--------------------------+
| Byte 0 | Byte 1 | Byte 2 | Byte 3              | Byte 4       | Byte 5-6              | Byte 7                   |
+========+========+========+=====================+==============+=======================+==========================+
| 3 byte timestamp         | Degrees of Latitude | Minutes      | Deciminutes (HI/LO)   | In Either North or South |
+--------------------------+---------------------+--------------+-----------------------+--------------------------+

GPS Longitude (GPS_LON)
----------------------
Shows the longitude

+--------+--------+--------+---------------------+--------------+-----------------------+--------------------------+
| Byte 0 | Byte 1 | Byte 2 | Byte 3              | Byte 4       | Byte 5-6              | Byte 7                   |
+========+========+========+=====================+==============+=======================+==========================+
| 3 byte timestamp         | Degrees of Longitude| Minutes      | Deciminutes (HI/LO)   | In Either East or West   |
+--------------------------+---------------------+--------------+-----------------------+--------------------------+

GPS Altitude Data (GPS_ALT)
-------------
Provides data about the GPS's altitude 

+--------+--------+--------+------------------+----------+---------------------+----------+
| Byte 0 | Byte 1 | Byte 2 | Byte 3-4         | Byte 5   | Byte 6              | Byte 7   |
+========+========+========+==================+==========+=====================+==========+
| 3 byte timestamp         | Altitude (HI/LO) | idk      | Units of Altitude   | None     |
+--------------------------+------------------+----------+---------------------+----------+

GPS Information (GPS_INFO)
--------------------------
Shows information about the GPS

+--------+--------+--------+--------------+---------------------+----------+
| Byte 0 | Byte 1 | Byte 2 | Byte 3       | Byte 4              | Byte 5-7 |
+========+========+========+==============+=====================+==========+
| 3 byte timestamp         |  idk         | Quality of the GPS  | None     |
+--------------------------+--------------+---------------------+----------+

State Estimation Data (STATE_EST_DATA)
--------------------------------------
Provides data about the state estimation

+--------+--------+--------+-----------------------------------+----------+
| Byte 0 | Byte 1 | Byte 2 | Byte 3-6                          | Byte 7   |
+========+========+========+===================================+==========+
| 3 byte timestamp         | 4 byte Data (LO/MED LO/MED HI/HI) | STATE_ID |
+--------------------------+-----------------------------------+----------+

State Estimation Calibration (STATE_EST_CALIB)
----------------------------------------------
Provides information about the state estimation calibration

+--------+--------+--------+-----------+------------------+----------+
| Byte 0 | Byte 1 | Byte 2 | Byte 3    | Byte 4-5         | Byte 6-7 |
+========+========+========+===========+==================+==========+
| 3 byte timestamp         | idk       | Apogee (HI/LO)   | None     |
+--------------------------+-----------+------------------+----------+

LED ON (LED_ON)
---------------
Turn LED on

+----------+
| Byte 0-7 |
+==========+
| None     |
+----------+

LED OFF (LED_OFF)
-----------------
Turn LED off 

+----------+
| Byte 0-7 |
+==========+
| None     |
+----------+


